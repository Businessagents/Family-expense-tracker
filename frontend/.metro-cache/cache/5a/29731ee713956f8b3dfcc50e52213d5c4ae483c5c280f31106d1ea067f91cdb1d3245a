{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"@/src/services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":41,"index":201}}],"key":"+0qJ8qEBmOacmbB2+tf55w8DGQI=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _srcServicesApi = require(_dependencyMap[2], \"@/src/services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n          _srcServicesApi.api.setToken(storedToken);\n\n          // Refresh user data\n          try {\n            const response = await _srcServicesApi.api.getMe();\n            setUser(response);\n            await AsyncStorage.default.setItem('user', JSON.stringify(response));\n          } catch (error) {\n            // Token might be expired, clear auth\n            await logout();\n          }\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, pin) => {\n      const response = await _srcServicesApi.api.login(email, pin);\n      setToken(response.access_token);\n      setUser(response.user);\n      _srcServicesApi.api.setToken(response.access_token);\n      await AsyncStorage.default.setItem('token', response.access_token);\n      await AsyncStorage.default.setItem('user', JSON.stringify(response.user));\n    };\n    const register = async (name, email, pin) => {\n      const response = await _srcServicesApi.api.register(name, email, pin);\n      setToken(response.access_token);\n      setUser(response.user);\n      _srcServicesApi.api.setToken(response.access_token);\n      await AsyncStorage.default.setItem('token', response.access_token);\n      await AsyncStorage.default.setItem('user', JSON.stringify(response.user));\n    };\n    const logout = async () => {\n      setToken(null);\n      setUser(null);\n      _srcServicesApi.api.setToken(null);\n      await AsyncStorage.default.removeItem('token');\n      await AsyncStorage.default.removeItem('user');\n    };\n    const updateUser = updatedUser => {\n      setUser(updatedUser);\n      AsyncStorage.default.setItem('user', JSON.stringify(updatedUser));\n    };\n    const refreshUser = async () => {\n      if (token) {\n        try {\n          const response = await _srcServicesApi.api.getMe();\n          setUser(response);\n          await AsyncStorage.default.setItem('user', JSON.stringify(response));\n        } catch (error) {\n          console.error('Error refreshing user:', error);\n        }\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        login,\n        register,\n        logout,\n        updateUser,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":118,"map":[[13,2,29,0,"exports"],[13,9,29,0],[13,10,29,0,"AuthProvider"],[13,22,29,0],[13,25,29,0,"AuthProvider"],[13,37,29,0],[14,2,115,0,"exports"],[14,9,115,0],[14,10,115,0,"useAuth"],[14,17,115,0],[14,20,115,0,"useAuth"],[14,27,115,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_srcServicesApi"],[18,21,3,0],[18,24,3,0,"require"],[18,31,3,0],[18,32,3,0,"_dependencyMap"],[18,46,3,0],[19,2,3,41],[19,6,3,41,"_reactJsxDevRuntime"],[19,25,3,41],[19,28,3,41,"require"],[19,35,3,41],[19,36,3,41,"_dependencyMap"],[19,50,3,41],[20,2,27,0],[20,8,27,6,"AuthContext"],[20,19,27,17],[20,35,27,20],[20,39,27,20,"createContext"],[20,45,27,33],[20,46,27,33,"createContext"],[20,59,27,33],[20,61,27,63,"undefined"],[20,70,27,72],[20,71,27,73],[21,2,29,7],[21,11,29,16,"AuthProvider"],[21,23,29,28,"AuthProvider"],[21,24,29,29],[22,4,29,31,"children"],[23,2,29,65],[23,3,29,66],[23,5,29,68],[24,4,30,2],[24,10,30,8],[24,11,30,9,"user"],[24,15,30,13],[24,17,30,15,"setUser"],[24,24,30,22],[24,25,30,23],[24,28,30,26],[24,32,30,26,"useState"],[24,38,30,34],[24,39,30,34,"useState"],[24,47,30,34],[24,49,30,48],[24,53,30,52],[24,54,30,53],[25,4,31,2],[25,10,31,8],[25,11,31,9,"token"],[25,16,31,14],[25,18,31,16,"setToken"],[25,26,31,24],[25,27,31,25],[25,30,31,28],[25,34,31,28,"useState"],[25,40,31,36],[25,41,31,36,"useState"],[25,49,31,36],[25,51,31,52],[25,55,31,56],[25,56,31,57],[26,4,32,2],[26,10,32,8],[26,11,32,9,"isLoading"],[26,20,32,18],[26,22,32,20,"setIsLoading"],[26,34,32,32],[26,35,32,33],[26,38,32,36],[26,42,32,36,"useState"],[26,48,32,44],[26,49,32,44,"useState"],[26,57,32,44],[26,59,32,45],[26,63,32,49],[26,64,32,50],[27,4,34,2],[27,8,34,2,"useEffect"],[27,14,34,11],[27,15,34,11,"useEffect"],[27,24,34,11],[27,26,34,12],[27,32,34,18],[28,6,35,4,"loadStoredAuth"],[28,20,35,18],[28,21,35,19],[28,22,35,20],[29,4,36,2],[29,5,36,3],[29,7,36,5],[29,9,36,7],[29,10,36,8],[30,4,38,2],[30,10,38,8,"loadStoredAuth"],[30,24,38,22],[30,27,38,25],[30,33,38,25,"loadStoredAuth"],[30,34,38,25],[30,39,38,37],[31,6,39,4],[31,10,39,8],[32,8,40,6],[32,14,40,12,"storedToken"],[32,25,40,23],[32,28,40,26],[32,34,40,32,"AsyncStorage"],[32,46,40,44],[32,47,40,44,"default"],[32,54,40,44],[32,55,40,45,"getItem"],[32,62,40,52],[32,63,40,53],[32,70,40,60],[32,71,40,61],[33,8,41,6],[33,14,41,12,"storedUser"],[33,24,41,22],[33,27,41,25],[33,33,41,31,"AsyncStorage"],[33,45,41,43],[33,46,41,43,"default"],[33,53,41,43],[33,54,41,44,"getItem"],[33,61,41,51],[33,62,41,52],[33,68,41,58],[33,69,41,59],[34,8,43,6],[34,12,43,10,"storedToken"],[34,23,43,21],[34,27,43,25,"storedUser"],[34,37,43,35],[34,39,43,37],[35,10,44,8,"setToken"],[35,18,44,16],[35,19,44,17,"storedToken"],[35,30,44,28],[35,31,44,29],[36,10,45,8,"setUser"],[36,17,45,15],[36,18,45,16,"JSON"],[36,22,45,20],[36,23,45,21,"parse"],[36,28,45,26],[36,29,45,27,"storedUser"],[36,39,45,37],[36,40,45,38],[36,41,45,39],[37,10,46,8,"api"],[37,25,46,11],[37,26,46,11,"api"],[37,29,46,11],[37,30,46,12,"setToken"],[37,38,46,20],[37,39,46,21,"storedToken"],[37,50,46,32],[37,51,46,33],[39,10,48,8],[40,10,49,8],[40,14,49,12],[41,12,50,10],[41,18,50,16,"response"],[41,26,50,24],[41,29,50,27],[41,35,50,33,"api"],[41,50,50,36],[41,51,50,36,"api"],[41,54,50,36],[41,55,50,37,"getMe"],[41,60,50,42],[41,61,50,43],[41,62,50,44],[42,12,51,10,"setUser"],[42,19,51,17],[42,20,51,18,"response"],[42,28,51,26],[42,29,51,27],[43,12,52,10],[43,18,52,16,"AsyncStorage"],[43,30,52,28],[43,31,52,28,"default"],[43,38,52,28],[43,39,52,29,"setItem"],[43,46,52,36],[43,47,52,37],[43,53,52,43],[43,55,52,45,"JSON"],[43,59,52,49],[43,60,52,50,"stringify"],[43,69,52,59],[43,70,52,60,"response"],[43,78,52,68],[43,79,52,69],[43,80,52,70],[44,10,53,8],[44,11,53,9],[44,12,53,10],[44,19,53,17,"error"],[44,24,53,22],[44,26,53,24],[45,12,54,10],[46,12,55,10],[46,18,55,16,"logout"],[46,24,55,22],[46,25,55,23],[46,26,55,24],[47,10,56,8],[48,8,57,6],[49,6,58,4],[49,7,58,5],[49,8,58,6],[49,15,58,13,"error"],[49,20,58,18],[49,22,58,20],[50,8,59,6,"console"],[50,15,59,13],[50,16,59,14,"error"],[50,21,59,19],[50,22,59,20],[50,43,59,41],[50,45,59,43,"error"],[50,50,59,48],[50,51,59,49],[51,6,60,4],[51,7,60,5],[51,16,60,14],[52,8,61,6,"setIsLoading"],[52,20,61,18],[52,21,61,19],[52,26,61,24],[52,27,61,25],[53,6,62,4],[54,4,63,2],[54,5,63,3],[55,4,65,2],[55,10,65,8,"login"],[55,15,65,13],[55,18,65,16],[55,24,65,16,"login"],[55,25,65,23,"email"],[55,30,65,36],[55,32,65,38,"pin"],[55,35,65,49],[55,40,65,54],[56,6,66,4],[56,12,66,10,"response"],[56,20,66,18],[56,23,66,21],[56,29,66,27,"api"],[56,44,66,30],[56,45,66,30,"api"],[56,48,66,30],[56,49,66,31,"login"],[56,54,66,36],[56,55,66,37,"email"],[56,60,66,42],[56,62,66,44,"pin"],[56,65,66,47],[56,66,66,48],[57,6,67,4,"setToken"],[57,14,67,12],[57,15,67,13,"response"],[57,23,67,21],[57,24,67,22,"access_token"],[57,36,67,34],[57,37,67,35],[58,6,68,4,"setUser"],[58,13,68,11],[58,14,68,12,"response"],[58,22,68,20],[58,23,68,21,"user"],[58,27,68,25],[58,28,68,26],[59,6,69,4,"api"],[59,21,69,7],[59,22,69,7,"api"],[59,25,69,7],[59,26,69,8,"setToken"],[59,34,69,16],[59,35,69,17,"response"],[59,43,69,25],[59,44,69,26,"access_token"],[59,56,69,38],[59,57,69,39],[60,6,70,4],[60,12,70,10,"AsyncStorage"],[60,24,70,22],[60,25,70,22,"default"],[60,32,70,22],[60,33,70,23,"setItem"],[60,40,70,30],[60,41,70,31],[60,48,70,38],[60,50,70,40,"response"],[60,58,70,48],[60,59,70,49,"access_token"],[60,71,70,61],[60,72,70,62],[61,6,71,4],[61,12,71,10,"AsyncStorage"],[61,24,71,22],[61,25,71,22,"default"],[61,32,71,22],[61,33,71,23,"setItem"],[61,40,71,30],[61,41,71,31],[61,47,71,37],[61,49,71,39,"JSON"],[61,53,71,43],[61,54,71,44,"stringify"],[61,63,71,53],[61,64,71,54,"response"],[61,72,71,62],[61,73,71,63,"user"],[61,77,71,67],[61,78,71,68],[61,79,71,69],[62,4,72,2],[62,5,72,3],[63,4,74,2],[63,10,74,8,"register"],[63,18,74,16],[63,21,74,19],[63,27,74,19,"register"],[63,28,74,26,"name"],[63,32,74,38],[63,34,74,40,"email"],[63,39,74,53],[63,41,74,55,"pin"],[63,44,74,66],[63,49,74,71],[64,6,75,4],[64,12,75,10,"response"],[64,20,75,18],[64,23,75,21],[64,29,75,27,"api"],[64,44,75,30],[64,45,75,30,"api"],[64,48,75,30],[64,49,75,31,"register"],[64,57,75,39],[64,58,75,40,"name"],[64,62,75,44],[64,64,75,46,"email"],[64,69,75,51],[64,71,75,53,"pin"],[64,74,75,56],[64,75,75,57],[65,6,76,4,"setToken"],[65,14,76,12],[65,15,76,13,"response"],[65,23,76,21],[65,24,76,22,"access_token"],[65,36,76,34],[65,37,76,35],[66,6,77,4,"setUser"],[66,13,77,11],[66,14,77,12,"response"],[66,22,77,20],[66,23,77,21,"user"],[66,27,77,25],[66,28,77,26],[67,6,78,4,"api"],[67,21,78,7],[67,22,78,7,"api"],[67,25,78,7],[67,26,78,8,"setToken"],[67,34,78,16],[67,35,78,17,"response"],[67,43,78,25],[67,44,78,26,"access_token"],[67,56,78,38],[67,57,78,39],[68,6,79,4],[68,12,79,10,"AsyncStorage"],[68,24,79,22],[68,25,79,22,"default"],[68,32,79,22],[68,33,79,23,"setItem"],[68,40,79,30],[68,41,79,31],[68,48,79,38],[68,50,79,40,"response"],[68,58,79,48],[68,59,79,49,"access_token"],[68,71,79,61],[68,72,79,62],[69,6,80,4],[69,12,80,10,"AsyncStorage"],[69,24,80,22],[69,25,80,22,"default"],[69,32,80,22],[69,33,80,23,"setItem"],[69,40,80,30],[69,41,80,31],[69,47,80,37],[69,49,80,39,"JSON"],[69,53,80,43],[69,54,80,44,"stringify"],[69,63,80,53],[69,64,80,54,"response"],[69,72,80,62],[69,73,80,63,"user"],[69,77,80,67],[69,78,80,68],[69,79,80,69],[70,4,81,2],[70,5,81,3],[71,4,83,2],[71,10,83,8,"logout"],[71,16,83,14],[71,19,83,17],[71,25,83,17,"logout"],[71,26,83,17],[71,31,83,29],[72,6,84,4,"setToken"],[72,14,84,12],[72,15,84,13],[72,19,84,17],[72,20,84,18],[73,6,85,4,"setUser"],[73,13,85,11],[73,14,85,12],[73,18,85,16],[73,19,85,17],[74,6,86,4,"api"],[74,21,86,7],[74,22,86,7,"api"],[74,25,86,7],[74,26,86,8,"setToken"],[74,34,86,16],[74,35,86,17],[74,39,86,21],[74,40,86,22],[75,6,87,4],[75,12,87,10,"AsyncStorage"],[75,24,87,22],[75,25,87,22,"default"],[75,32,87,22],[75,33,87,23,"removeItem"],[75,43,87,33],[75,44,87,34],[75,51,87,41],[75,52,87,42],[76,6,88,4],[76,12,88,10,"AsyncStorage"],[76,24,88,22],[76,25,88,22,"default"],[76,32,88,22],[76,33,88,23,"removeItem"],[76,43,88,33],[76,44,88,34],[76,50,88,40],[76,51,88,41],[77,4,89,2],[77,5,89,3],[78,4,91,2],[78,10,91,8,"updateUser"],[78,20,91,18],[78,23,91,22,"updatedUser"],[78,34,91,39],[78,38,91,44],[79,6,92,4,"setUser"],[79,13,92,11],[79,14,92,12,"updatedUser"],[79,25,92,23],[79,26,92,24],[80,6,93,4,"AsyncStorage"],[80,18,93,16],[80,19,93,16,"default"],[80,26,93,16],[80,27,93,17,"setItem"],[80,34,93,24],[80,35,93,25],[80,41,93,31],[80,43,93,33,"JSON"],[80,47,93,37],[80,48,93,38,"stringify"],[80,57,93,47],[80,58,93,48,"updatedUser"],[80,69,93,59],[80,70,93,60],[80,71,93,61],[81,4,94,2],[81,5,94,3],[82,4,96,2],[82,10,96,8,"refreshUser"],[82,21,96,19],[82,24,96,22],[82,30,96,22,"refreshUser"],[82,31,96,22],[82,36,96,34],[83,6,97,4],[83,10,97,8,"token"],[83,15,97,13],[83,17,97,15],[84,8,98,6],[84,12,98,10],[85,10,99,8],[85,16,99,14,"response"],[85,24,99,22],[85,27,99,25],[85,33,99,31,"api"],[85,48,99,34],[85,49,99,34,"api"],[85,52,99,34],[85,53,99,35,"getMe"],[85,58,99,40],[85,59,99,41],[85,60,99,42],[86,10,100,8,"setUser"],[86,17,100,15],[86,18,100,16,"response"],[86,26,100,24],[86,27,100,25],[87,10,101,8],[87,16,101,14,"AsyncStorage"],[87,28,101,26],[87,29,101,26,"default"],[87,36,101,26],[87,37,101,27,"setItem"],[87,44,101,34],[87,45,101,35],[87,51,101,41],[87,53,101,43,"JSON"],[87,57,101,47],[87,58,101,48,"stringify"],[87,67,101,57],[87,68,101,58,"response"],[87,76,101,66],[87,77,101,67],[87,78,101,68],[88,8,102,6],[88,9,102,7],[88,10,102,8],[88,17,102,15,"error"],[88,22,102,20],[88,24,102,22],[89,10,103,8,"console"],[89,17,103,15],[89,18,103,16,"error"],[89,23,103,21],[89,24,103,22],[89,48,103,46],[89,50,103,48,"error"],[89,55,103,53],[89,56,103,54],[90,8,104,6],[91,6,105,4],[92,4,106,2],[92,5,106,3],[93,4,108,2],[93,24,109,4],[93,28,109,4,"_reactJsxDevRuntime"],[93,47,109,4],[93,48,109,4,"jsxDEV"],[93,54,109,4],[93,56,109,5,"AuthContext"],[93,67,109,16],[93,68,109,17,"Provider"],[93,76,109,25],[94,6,109,26,"value"],[94,11,109,31],[94,13,109,33],[95,8,109,35,"user"],[95,12,109,39],[96,8,109,41,"token"],[96,13,109,46],[97,8,109,48,"isLoading"],[97,17,109,57],[98,8,109,59,"login"],[98,13,109,64],[99,8,109,66,"register"],[99,16,109,74],[100,8,109,76,"logout"],[100,14,109,82],[101,8,109,84,"updateUser"],[101,18,109,94],[102,8,109,96,"refreshUser"],[103,6,109,108],[103,7,109,110],[104,6,109,110,"children"],[104,14,109,110],[104,16,110,7,"children"],[105,4,110,15],[106,6,110,15,"fileName"],[106,14,110,15],[106,16,110,15,"_jsxFileName"],[106,28,110,15],[107,6,110,15,"lineNumber"],[107,16,110,15],[108,6,110,15,"columnNumber"],[108,18,110,15],[109,4,110,15],[109,11,111,26],[109,12,111,27],[110,2,113,0],[111,2,115,7],[111,11,115,16,"useAuth"],[111,18,115,23,"useAuth"],[111,19,115,23],[111,21,115,26],[112,4,116,2],[112,10,116,8,"context"],[112,17,116,15],[112,20,116,18],[112,24,116,18,"useContext"],[112,30,116,28],[112,31,116,28,"useContext"],[112,41,116,28],[112,43,116,29,"AuthContext"],[112,54,116,40],[112,55,116,41],[113,4,117,2],[113,8,117,6,"context"],[113,15,117,13],[113,20,117,18,"undefined"],[113,29,117,27],[113,31,117,29],[114,6,118,4],[114,12,118,10],[114,16,118,14,"Error"],[114,21,118,19],[114,22,118,20],[114,67,118,65],[114,68,118,66],[115,4,119,2],[116,4,120,2],[116,11,120,9,"context"],[116,18,120,16],[117,2,121,0],[118,0,121,1],[118,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","updateUser","refreshUser","useAuth"],"mappings":"AAA;OC4B;YCK;GDE;yBEE;GFyB;gBGE;GHO;mBIE;GJO;iBKE;GLM;qBME;GNG;sBOE;GPU;CDO;OSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}